variables:
  - name: serviceConnection
    value: DTS-SHAREDSERVICES-${{ upper(parameters.environment) }}

steps:
  - task: TerraformCLI@0
    displayName: Terraform Plan
    inputs:
      command: plan
      terraformVersion: $(tfversion)
      workingDirectory: $(System.DefaultWorkingDirectory)
      environmentServiceName: ${{ variables.serviceConnection }}
      commandOptions: >
        -out tfplan
        -var-file $(env).tfvars
